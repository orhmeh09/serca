---
title: "Overview"
author: "Altan"
date: "August 1, 2015"
output: html_document
---
```{r, echo=FALSE}
source("serca.R")
library(knitr)
library(foreach)
library(iterators)
library(dplyr)
message("ta")
fmeta <- tbl_df(read.delim('data/meta.txt', stringsAsFactors = FALSE, fileEncoding = "UTF-8"))

freqs <- tbl_df(data.frame())
foreach(x=iter(fmeta, by='row')) %do% {
  t <- load_frequencies(x$FrequenciesPath) %>% mutate(Label=x$Label)
  freqs <- full_join(freqs, t)
}

setsizes <- tbl_df(data.frame())
foreach(x=iter(fmeta, by='row')) %do% {
  t <- load_frequencies(x$FrequenciesPath, x$Label)
  freqs <- full_join(freqs, t)
}

tar <- lapply(freqs, get_setsizes)

fmeta$MeanSetSize <- foreach(x=iter(fmeta, by='row')) %do% round(mean(setsizes[[x$Label]]$setsize), 2)
fmeta$MedianSetSize <- foreach(x=iter(fmeta, by='row')) %do% round(median(setsizes[[x$Label]]$setsize), 2)

```

# Data Sets
```{r, echo=FALSE}
kable(select(fmeta, Label, Subjects, Year, FullName))
```

## Set Size Info
```{r, echo=FALSE}
kable(select(fmeta, Label, MeanSetSize, MedianSetSize))
```


## Target Info
```{r, echo=FALSE}

kable(select(fmeta, Label, MeanSetSize, MedianSetSize))
```
### Individual Targets
```{r, echo=FALSE}

fmeta$MeanSetSize <- foreach(x=iter(fmeta, by='row')) %do% round(mean(setsizes[[x$Label]]$setsize), 2)

targets <- unique(freqs[1]$Target)

foreach(i=1:length(targets)) %do% {
  t <- targets[i]
  # setsizes[['tek']]$setsize
}

```

# Info
