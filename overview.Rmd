---
title: "Overview"
author: "Altan"
date: "August 1, 2015"
output: html_document
---
```{r, echo=FALSE, results="hide"}
library(knitr)
library(iterators)
library(foreach)
source("serca.R")


set_os_locales()
meta <- load_meta('data/datasets.txt')

frequencies <- tbl_df(read.delim('data/frequencies.txt', stringsAsFactors = FALSE, fileEncoding="UTF-8"))
setsizes <- tbl_df(read.delim('data/setsizes.txt', stringsAsFactors = FALSE, fileEncoding="UTF-8"))
setsizesStats <- tbl_df(read.delim('data/setsizes_stats.txt', stringsAsFactors = FALSE, fileEncoding="UTF-8"))

```

# Data Sets
```{r DataSets, echo=FALSE}
kable(select(meta, -FrequencyPath))
```

## Set Size Info
```{r SetSizesStats, echo=FALSE}
kable(setsizesStats)
```

# Analyses
## Reliability

```{r Reliability, echo=FALSE}
top1 <- get_top_frequencies(frequencies)

means <- top1 %>% select(tem, umi, onl) %>% summarise_each(funs(mean))

kable(means, digits = 2, caption = "Mean probabilities of first response")

kable(cor(top1 %>% select(tem, umi, onl)), digits = 2, caption = "Correlations of first response probabilities")


```


## Target Info
```{r, echo=FALSE}


#targets <- unique(select(setsizes, Target))
#ttables <- foreach(t = iter(targets, by='row')) %do% {
#  foreach(m = iter(fmeta, by='row')) %do% {
#   filter(frequencies, Label==m$Label, Target==t$Target, n > 1) %>% top_n(n, n = 3) %>% ungroup() %>% arrange(Label, Target, desc(n), #Assoc)
#    }
#}
#ttables <- unlist(ttables, recursive = FALSE)
```

```{r, echo=FALSE, results='asis'}
#for (i in 1:length(ttables)) {
#    print(kable(ttables[[i]]))
#}


```

