a
blanks
a
replace(a$Blanks, is.na(a$Blanks), 0)
a$Blanks
a <- replace(a$Blanks, is.na(a$Blanks), 0)
a
a <- setsizes %>% left_join(idios) %>% left_join(blanks)
a$Blanks <- replace(a$Blanks, is.na(a$Blanks), 0)
a
blanks
?replace
a %>% mutate(Blanks= replace(Blanks, is.na(Blanks), 0))
a %>% mutate(Blanks= replace(Blanks, is.na(Blanks, na.rm=TRUE), 0))
a %>% mutate(Blanks= replace(Blanks, is.na(Blanks), 5))
blanks
setsizes
a <- setsizes %>% left_join(idios) %>% left_join(blanks)
a
a %>% mutate(Blanks= replace(Blanks, is.na(Blanks), 0))
b <- a %>% mutate(Blanks= replace(Blanks, is.na(Blanks), 0))
View(b)
source('~/code/serca/serca.R')
setsizes <- get_setsizes(frequencies)
setsizes
source('~/code/serca/serca.R')
get_setsizes(frequencies)
frequencies
frequencies %>% group_by(Target, Label) %>% summarise(G=sum(n))
frequencies %>% group_by(Target, Label) %>% summarise(G=sum(n))
o <- frequencies %>% group_by(Target, Label) %>% summarise(G=sum(n))
unique(o$G)
o %>% group_by(Label, Target)
o %>% group_by(Label, Target) %>% filter(G != 52 || G != 105 || G != 100)
o %>% group_by(Label, Target) %>% filter((G != 52 || G != 105 || G != 100)
)
o %>% group_by(Label, Target) %>% filter(G == 1)
O
O
OOOO
o
o %>% group_by(Label) %>% arrange(G)
o %>% group_by(Label) %>% arrange(G)
o <- o %>% group_by(Label) %>% arrange(G)
View(o)
setsizes
meta
meta <- load_meta('data/datasets.txt')
meta$Label == 'onl'
which(meta$Label == onl)
which(meta$Label == onl)
which(meta$Label == "onl")
meta$Label[which(meta$Label == "onl")]
meta[which(meta$Label == "onl")]
meta[['Subjects'][which(meta$Label == "onl")]
meta['Subjects'][which(meta$Label == "onl")]
meta
meta[which(meta$Label == "onl")]
meta[which(meta$Label == "onl"),Subjects]
meta[which(meta$Label == "onl"),"Subjects"]
meta[which(meta$Label == "onl"),"Subjects"]+10
frequencies
btl <- data.frame(Assoc="?")
btl
frequencies %>% group_by(Target, Label) %>% summarise(meta[which(meta$Label == Label),"Subjects"]-sum(n))
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == Label),"Subjects"]-sum(n))
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == Label),"Subjects"])
frequencies %>% group_by(Target, Label) %>% summarise(Z=as.integer(meta[which(meta$Label == Label),"Subjects"])-sum(n))
meta$Label=="onl"
meta[which(meta$Label == Label)]
meta[which(meta$Label == "onl")]
meta[which(meta$Label == "onl"), "Subjects"]
meta[which(meta$Label == "onl"), "Subjects"] - 3
meta[which(meta$Label == "onl"), "Subjects"] - 340
as.integer(meta[which(meta$Label == "onl"), "Subjects"]) - 340
meta[which(meta$Label == "onl"), "Subjects"])$Subjects - 340
meta[which(meta$Label == "onl"), "Subjects"])[["Subjects"]]
meta[which(meta$Label == "onl"), "Subjects"][["Subjects"]]
meta[which(meta$Label == "onl"), "Subjects"][["Subjects"]]
meta[which(meta$Label == "onl"), "Subjects"][["Subjects"]] - 230
meta[which(meta$Label == "onl"), "Subjects"][["Subjects"]] - 40
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == "onl"), "Subjects"][["Subjects"]]-sum(n))
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == Label), "Subjects"][["Subjects"]]-sum(n))
max(0, NA)
min(0, NA)
ifelse(NA, 0, NA)
ifelse(NA, 0, 0)
ifelse((1==0), 0, 0)
ifelse((1==0), 0, NA)
frequencies %>% group_by(Target, Label) %>% summarise(Z=ifelse(meta[which(meta$Label == Label), "Subjects"][["Subjects"]])
)
frequencies %>% group_by(Target, Label) %>% summarise(Z=ifelse(meta[which(meta$Label == Label), "Subjects"][["Subjects"]]))
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == Label), "Subjects"][["Subjects"]]))
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == Label), "Subjects"][["Subjects"]])
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == Label), "Subjects"][["Subjects"]]
)
frequencies %>% group_by(Target, Label) %>% summarise(Z=meta[which(meta$Label == Label), "Subjects"])
frequencies %>% group_by(Target, Label) %>% summarise(Z=select(filter(meta, "Label"==Label), "Subjects"))
frequencies %>% group_by(Target, Label) %>% summarise(Z=select(filter(meta, "Label"==Label), "Subjects")))
frequencies %>% group_by(Target, Label) %>% summarise(Z=select(filter(meta, "Label"==Label), "Subjects"))
frequencies %>% group_by(Target, Label) %>% mutate(Z=select(filter(meta, "Label"==Label), "Subjects"))
frequencies %>% group_by(Target, Label) %>% mutate(Z=meta[which(meta$Label == Label), "Subjects"])
frequencies %>% group_by(Target, Label) %>% mutate(Z=meta[which(meta[["Label"]] == Label), "Subjects"])
meta[which(meta[["Label"]] == Label), "Subjects"]
Label = "onl"
meta[which(meta[["Label"]] == Label), "Subjects"]
meta[which(meta[["Label"]] == Label), "Subjects"]$Subjects
as.integer(meta[which(meta[["Label"]] == Label), "Subjects"]$Subjects)
frequencies %>% left_join(meta)
frequencies %>% left_join(meta)
frequencies %>% left_join(select(meta, Label, Subjects))
meta %>% filter(Label==label) %>% select(Subjects) %>% first()
label="onl"
meta %>% filter(Label==label) %>% select(Subjects) %>% first()
nsubjects <- function(meta, label) {
meta %>% filter(Label==label) %>% select(Subjects) %>% first()
}
frequencies %>% group_by(Target, Label) %>% mutate(Z=nsubjects(meta, Label))
nsubjects(meta, "onl")
frequencies %>% mutate(Baa=nsubjects(meta, Label))
nsubjects <- function(meta, label) {
meta %>% filter(Label==label) %>% select(Subjects)
}
frequencies %>% mutate(Baa=nsubjects(meta, Label))
frequencies %>% mutate(Baa=(nsubjects(meta, Label))
)
frequencies %>% left_join(meta, by=Label)
frequencies %>% left_join(meta)
frequencies %>% left_join(select(meta, Label, Subjects))
frequencies %>% left_join(select(meta, Label, Subjects))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% filter(sum(n) != Subjects)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% filter(sum(n) != Subjects)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Label, Target) %>% filter(sum(n) != Subjects)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Label, Target) %>% filter(sum(n) == 103)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Label, Target) %>% filter((sum(n) - Subjects) > 1)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Label, Target) %>% filter((sum(n) - Subjects) < 1)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% summarise(sum(n))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% summarise(sum(n)) %>% ungroup()
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n) )
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n) )
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% group_by(Target, Label)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% mutate(S = sum(T))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(Assoc='?', n=T)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Assoc='?', n=T))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=Target, Label=Label, Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=Target, Label=Label, Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=Target, Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame("Target"=Target, Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target="1", Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% ungroup() %>% bind_rows(data.frame(Target=Target, Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% ungroup() %>% bind_rows(data.frame(Target=n, Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>%  %>% left.join(data.frame(Target=n, Assoc='?', n=T)))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>%  %>% bind_rows(data.frame(Target=n, Assoc='?', n=T)))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>%  %>% bind_rows(data.frame(Target=n, Assoc='?', n=T))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=n, Assoc='?', n=T))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=Target, Assoc='?', n=T))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(Target=Target, T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=Target, Assoc='?', n=T))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(B=Target, T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=B, Assoc='?', n=T))
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(B=Target, T = Subjects - sum(n)) %>% filter(T > 0) %>% select(B)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(B=Target, T = Subjects - sum(n)) %>% filter(T > 0) %>% data.frame(B)
help("bind_rows")
in_df1 <- data_frame(x=c("a", "b", "a"))
in_df1
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>%  %>% bind_rows(data.frame(Target=c(Target), Assoc=c("?")))
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=c(Target), Assoc=c("?")))
)
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=c(parent.frame), Assoc=c("?")))
)
parent.frame
parent.frame()
parent.frame()$a
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=c(parent.frame()$Target), Assoc=c("?")))
)
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=parent.frame()$Target, Assoc="?"))
)
View(frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=parent.frame()$Target, Assoc="?"))
)
frequencies %>% left_join(select(meta, Label, Subjects)) %>% group_by(Target, Label) %>% mutate(T = Subjects - sum(n)) %>% filter(T > 0) %>% bind_rows(data.frame(Target=parent.frame()$Target, Assoc="?")
)
tem <- load_one_frequency_table("data/frequency/tem.txt", "tem")
tem
blanks
setsizes
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Ido) != 100)
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Idoo) != 100)
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Idio) != 100)
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Idio) != 100) %>% filter(Blanks != 0)
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Idio) != 100) %>% filter(Blanks == 0)
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Idio) != 100) %>% filter(Blanks == 0)
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Idio) != 100) %>% filter(Blanks == 0) %>% mutate(BtoAdd = 100-(SetSize+Idio))
setsizes %>% filter(Label == "tem") %>% filter((SetSize+Idio) != 100) %>% mutate(BtoAdd = 100-(SetSize+Idio))
source('~/code/serca/serca.R')
source('~/code/serca/serca.R')
source('~/code/serca/serca.R')
source('~/code/serca/serca.R')
meta <- load_meta('data/datasets.txt')
frequencies <- tbl_df(read.delim('data/frequencies.txt', stringsAsFactors = FALSE, fileEncoding="UTF-8"))
setsizes <- tbl_df(get_setsizes(frequencies))
write.table(setsizes, "data/setsizes.txt", quote = FALSE, sep = "\t", row.names = FALSE, fileEncoding="UTF-8")
source('~/code/serca/serca.R')
setsizes <- tbl_df(get_setsizes(frequencies))
setsizes
setsizes %>% arrange(Target)
source('~/code/serca/serca.R')
source('~/code/serca/serca.R')
setsizes %>% arrange(Target)
write.table(setsizes, "data/setsizes.txt", quote = FALSE, sep = "\t", row.names = FALSE, fileEncoding="UTF-8")
write.table(setsizes, "data/setsizes.txt", quote = FALSE, sep = "\t", row.names = FALSE, fileEncoding="UTF-8")
setsizes
setsizes %>% arrange(Target)
setsizes %>% arrange(Target, SetSize) %>% write.table("data/setsizes.txt", quote = FALSE, sep = "\t", row.names = FALSE, fileEncoding="UTF-8")
setsizes %>% arrange(Target, desc(SetSize)) %>% write.table("data/setsizes.txt", quote = FALSE, sep = "\t", row.names = FALSE, fileEncoding="UTF-8")
sst <- get_setsizes_stats(setsizes)
sst
sst %>% arrange(desc(Mean)) %>% write.table("data/setsizes_stats.txt", quote = FALSE, sep = "\t", row.names = FALSE, fileEncoding="UTF-8")
setsizes
setsizes %>% filter(Target=="asker")
setsizes %>% filter(Target=="asker") %>% arrange(SetSize)
setsizes %>% filter(Target=="asker") %>% arrange(SetSize) %>% select(-Target)
q <- setsizes %>% filter(Target=="asker") %>% arrange(SetSize) %>% select(-Target)
frequencies %>% filter(Target=="asker") %>% filter(Label=="tem") %>% top_n(3, desc(Rank))
frequencies %>% filter(Target=="asker") %>% group_by(Label) %>% top_n(3, desc(Rank))
z
vq
sst
t
setsizesStats
setsizes
setsizes %>% filter(Label=="onl")
t
frequencies %>% filter(Label=='onl', Target=='asker')
frequencies %>% filter(Label=='onl', Target=='asker') %>% top_n(6)
frequencies %>% filter(Label=='onl', Target=='asker') %>% top_n(6) %>% select(Rank, Assoc, Probability) %>% arrange(desc(Rank), Assoc)
t.onl.asker <- frequencies %>% filter(Label=='onl', Target=='asker') %>% top_n(6) %>% select(Rank, Assoc, Probability) %>% arrange(desc(Rank), Assoc)
t.onl.asker
t.tem.asker <- frequencies %>% filter(Label=='tem', Target=='asker') %>% top_n(6) %>% select(Rank, Assoc, Probability) %>% arrange(desc(Rank), Assoc)
t.umi.asker <- frequencies %>% filter(Label=='umi', Target=='asker') %>% top_n(6) %>% select(Rank, Assoc, Probability) %>% arrange(desc(Rank), Assoc)
t.umi.asker
t
t <- list()
t$onl <- t.onl.asker
t$tem <- t.tem.asker
t$umi <- t.umi.asker
kable
library(knitr)
kable(t)
t = data.frame(Tables=c(t.umi.asker, t.onl.asker, t.tem.asker))
t = data.frame(Tables=c(t.umi.asker, t.onl.asker, t.tem.asker))
t = data.frame(Names=c('umi', 'onl', 'tem'), Tables=c(t.umi.asker, t.onl.asker, t.tem.asker))
t = data.frame(Names=c('umi', 'onl', 'tem'), Tables=c(t.umi.asker, t.onl.asker, t.tem.asker), check.rows = FALSE, check.names = FALSE, stringsAsFactors = FALSE)
t = data.frame(Names=c('umi', 'onl', 'tem'), Tables=c(t.umi.asker, t.onl.asker, t.tem.asker), check.rows = FALSE, check.names = FALSE, stringsAsFactors = FALSE)
View(setsizes)
View(frequencies)
cor(c(1,2,3))
cor(c(1,2,3), c(1,2,3)
)
cor(c(1,2,3), c(1,2,3))
frequencies %>% filter(Target=="masa")
frequencies %>% filter(Target=="asker")
frequencies %>% filter(Target=="asker", Rank in 1:3)
1:3
frequencies %>% filter(Target=="asker", 1 < Rank < 3)
frequencies %>% filter(Target=="asker", Rank < 3, Rank > 1)
frequencies %>% filter(Target=="asker", Rank =< 3, Rank >= 1)
frequencies %>% filter(Target=="asker", Rank <= 3, Rank >= 1)
a <- frequencies %>% filter(Target=="asker", Rank <= 3, Rank >= 1)
cor(c(0.170), c(0.076))
cor(c(0.170), c(0.076))
cor(c(0.170), c(0.076, c(0.100)))
cor(c(0.170,), c(0.076, 0.100))
cor(c(0.170,), y = c(0.076, 0.100))
cor(c(0.170), y = c(0.076, 0.100))
cor(c(0.170, 0.0), y = c(0.076, 0.100))
frequencies
frequencies %>% group_by(Label, Target) %>% filter(Rank == 1) %>% first()
frequencies %>% group_by(Label, Target) %>% filter(Rank == 1) %>% top_n(1)
tops < - frequencies %>% group_by(Label, Target) %>% filter(Rank == 1) %>% top_n(1)
tops < - frequencies %>% group_by(Label, Target) %>% filter(Rank == 1) %>% top_n(1)
tops <- frequencies %>% group_by(Label, Target) %>% filter(Rank == 1) %>% top_n(1)
write.table(tops, "top_1_assocs.txt", sep="\t", row.names=FALSE, fileEncoding="UTF-8", quote=FALSE)
library(tidyr)
tidyr::expand(tops)
tidyr::spread(tops, "Label", "onl")
tidyr::spread(tops, "Label", "onl")
spread(tops, Label)
spread(tops, key = "Label", value = c("onl", "tek", "umi")
)
tops %>% spread("Label", "Target")
tops %>% spread("Label", "Probability")
tops %>% spread("Label", "Probability", "Target")
tops %>% spread("Label", c("Probability", "Target"))
tops %>% select(-Assoc)
tops %>% select(-Assoc, -Rank, -RankMax)
tops %>% select(-Assoc, -Rank, -RankMax) %>% spread("Label", "Probability")
tops %>% select(-Assoc, -Rank, -RankMax) %>% spread("Probability")
tops %>% select(-Assoc, -Rank, -RankMax) %>% spread("Probability", "Label")
tops %>% select(-Assoc, -Rank, -RankMax)
tops %>% select(-Assoc, -Rank, -RankMax, -n)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Label, Probability)
tops[1,60]
tops[60]
tops
tops[[60]]
tops[[1,60]
]
tops[60,1]
tops[66,1]
tops[60:61, 1]
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, "Probability")
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, c("Probability", "Label")
)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, c("Probability", "Label"))
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, c("Label", "Probability"))
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, c("Label"))
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, "Label")
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, Label)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, Probability)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, Probability, Label)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Target, c(Probability, Label)
)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Probability)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Probability, Label)
tops %>% select(-Assoc, -Rank, -RankMax, -n) %>% spread(Probability, Row)
View(tops)
tops
View(tops)
rownames(tops)
tops %>% spread(Target)
tops %>% spread(Target, Label)
tops %>% select(-Assoc, -n, -Rank, -RankMax)
top1 <- tops %>% select(-Assoc, -n, -Rank, -RankMax)
top1 %>% spread(Target, Label)
top1 %>% spread(Probability)
top1 %>% spread(Probability, Label)
top1 %>% spread(Probability, Target)
top1 %>% spread(Probability, Target, Label)
top1 %>% spread(Probability, c(Target, Label))
top1 %>% spread(Label, Target)
top1 %>% spread(Label, Probability)
top1 %>% spread(Target, Label, Probability)
top1 %>% spread(Target, Label)
library(reshape2)
top1$row <- 1:nrow(top1)
top1 %>% spread(Target, Label)
top1 %>% spread(Target, Probability)
top1 %>% spread(Target, Probability, Label)
top1 %>% spread(Label, Probability)
top1 %>% spread(Label, Target)
top1 %>% spread(Target, Label)
top1 %>% spread(Probability, Label)
top1 %>% spread(Probability)
top1 %>% spread(Probability, Target)
top1 %>% spread(Label)
top1 %>% spread(Label, Target)
top1 %>% spread(c(Target, Probability), Label)
top1 %>% spread(c(Target, Probability), c(Label, Probability))
top1 %>% spread(Target, Label)
help(spread)
top1 %>% dcast(Target+Probability ~ Label)
top1 %>% dcast(Target ~ Label+Probability)
top1 %>% dcast(Target + Label ~ Probability)
tbl_df(top1 %>% dcast(Target + Label ~ Probability))
tbl_df(top1 %>% dcast(Target + Probability ~ Labely))
tbl_df(top1 %>% dcast(Target + Probability ~ Label))
tbl_df(top1 %>% dcast(Target ~ Label))
tbl_df(top1 %>% dcast(Target ~ Probability))
tbl_df(top1 %>% dcast(Target ~ Label))
top1 <- tops %>% select(-Assoc, -n, -Rank, -RankMax)
tbl_df(top1 %>% dcast(Target ~ Label))
tbl_df(top1 %>% dcast(Target ~ Probability))
tbl_df(top1 %>% dcast(Target+Probability ~ Label))
tbl_df(top1 %>% dcast(Target ~ Label))
tbl_df(top1 %>% dcast(Target ~ Label, value.var = "Probability")
)
top1 %>% dcast(Target ~ Label, value.var = "Probability")
top1 %>% dcast(Target ~ Label, value.var = Probability)
top1 %>% dcast(Target ~ Label, value.var = Probability)
top1 %>% dcast(Target ~ Label)
top1 %>% dcast(Target ~ Label + Probability)
top1 %>% dcast(Target ~ Probability+Label)
top1 %>% dcast(Target + Probability ~ Label)
View(top1)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(length(Assoc)) %>% summary(Top1 = first(Assoc))
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(length(Assoc)) %>% first()
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(length(Assoc))
frequencies %>% filter(Rank==1) %>% group_by(Target)
library(stringr)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(str_length(Assoc)
)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc)) %>% first()
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc)) %>% filter(Assoc == first())
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc))
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc)) %>% slice(1)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc)) %>% slice(1) %>% Select(Label, Target, Probability)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc)) %>% slice(1) %>% select(Label, Target, Probability)
tops <- frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc)) %>% slice(1) %>% select(Label, Target, Probability)
write.table(tops, "data/top1_probs.txt", sep = '\t', row.names = FALSE, quote = FALSE)
tops %>% spread(Label, Probability)
tops %>% spread(Target, Label)
tops %>% spread(Target, Probability)
tops %>% spread(Probability, Label)
tops %>% spread(Probability, Target)
tops %>% spread(Label)
tops %>% spread(Label, Target)
tops %>% dcast(Target+Probability~Label)
tops %>% dcast(Target~Label)
tops %>% dcast(Target~Label, value.var = Probability)
tops %>% dcast(Target~Label, value.var = 'Probability')
tops %>% dcast(Target + Label, value.var = 'Probability')
tops %>% dcast('Target + Label, value.var = 'Probability')
tops %>% dcast('Target' + 'Label' value.var = 'Probability')
tops %>% dcast('Target' + 'Label', value.var = 'Probability')
tops %>% dcast(Label, value.var = 'Probability')
tops %>% dcast(Label+Target, value.var = 'Probability')
tops %>% dcast(Label~Target, value.var = 'Probability')
tops %>% dcast(Target~Probability, value.var = 'Probability')
tops %>% dcast(Target~Probability, value.var = "Label")
tops %>% dcast(Target~Label,Probability)
tops %>% dcast(Target~Label, value.vars="Probability")
tops
t <- tops %>% arrange(Target, Label, Probability)
View(t)
t
tops
tops <- frequencies %>% filter(Rank==1) %>% group_by(Target) %>% arrange(desc(Rank), str_length(Assoc)) %>% slice(1) %>% ungroup() %>% select(Label, Target, Probability)
tops
nrow(tops)
write.table(tops, "data/top1_probs.txt", sep = '\t', row.names = FALSE, quote = FALSE)
tops %>% dcast(Target~Label,Probability)
tops %>% dcast(Target~Label)
tops %>% filter(Target=="yama")
tops <- frequencies %>% filter(Rank==1) %>% group_by(Target) %>% slice(1:1) %>% ungroup() %>% arrange(Target, Label)
tops
tops
frequencies %>% select(Target == 'yama')
frequencies %>% filter(Target=="yama", Rank==1)
frequencies %>% filter(Target=="yama", Rank==1) %>% group_by(Target) %>% group_by(Label) %>% slice(1)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% slice(1)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% slice(1)
frequencies %>% select(Target == 'yama')
frequencies
ungroup()
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% slice(1)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% slice(1:1)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% slice(1) %>% ungroup()
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% top_n(1)
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% top_n(1) %>% ungroup()
frequencies %>% filter(Rank==1) %>% group_by(Target) %>% group_by(Label) %>% top_n(10)
frequencies %>% filter(Rank==1) %>% group_by(Label) %>% top_n(10)
frequencies %>% filter(Rank==1) %>% group_by(Label) %>% top_n(1)
frequencies %>% filter(Rank==1) %>% group_by(Label, Target) %>% top_n(1)
v <- frequencies %>% filter(Rank==1) %>% group_by(Label, Target) %>% top_n(1)
View(v)
v <- frequencies %>% filter(Rank==1) %>% group_by(Label, Target) %>% filter(row_number() == 1)
nrow(v)
nrow(filter(v, Label=="onl"))
nrow(filter(v, Label=="tem"))
nrow(filter(v, Label=="umi"))
write.table(v, "data/top1_probs.txt", sep = '\t', row.names = FALSE, quote = FALSE)
v
v <- select(v, Label, Target, Probability)
v <- arrange(v, Target, Label)
spread(v, Target, Label)
spread(v, Label, Probability)
tops <- spread(v, Label, Probability)
v
tops
tops %>% rename('onl', 'P.onl')
help(rename)
tops %>% rename(P.onl <- onl, P.tem <- tem, P.umi <- umi) %>% select(Target, P.tem, P.umi, P.onl)
tops %>% rename(P.onl = onl, P.tem= tem, P.umi = umi) %>% select(Target, P.tem, P.umi, P.onl)
tops <- tops %>% rename(P.onl = onl, P.tem= tem, P.umi = umi) %>% select(Target, P.tem, P.umi, P.onl)
write.table(tops, "data/top1_probs.txt", sep = '\t', row.names = FALSE, quote = FALSE)
cor(tops$P.tem, tops$P.umi)
cor(tops$P.tem, tops$P.onl)
cor(tops$P.umi, tops$P.onl)
t.test(tops$P.tem, tops$P.umi)
cor.test(tops$P.tem, tops$P.umi)
cor(tops$P.onl, tops$P.umi)
cor(tops$P.umi, tops$P.umi)
cor(tops$P.umi, tops$P.onl)
cor(tops$P.onl, tops$P.umi, method = "spearman")
cor(tops$P.onl, tops$P.umi, method = "kendall")
cor(tops$P.tem, tops$P.umi, method = "kendall")
cor(tops$P.tem, tops$P.umi, method = "spearman")
wilcox.test(tops$P.tem)
ks.test(tops$P.tem)
shapiro.test()
help(shapiro.test)
shapiro.test(tops$P.tem)
2.474e-05
2.474e-05
print(2.474e-05)
shapiro.test(tops$P.umi)
rnorm(100)
a <- rnorm(100)
shapiro.test(a)
shapiro.test(tops$P.umi)
ks.test(tops$P.tem, "pnorm")
ks.test(tops$P.tem, "rnorm")
ks.test(tops$P.tem, "norm")
ks.test(tops$P.tem, tops$P.umi)
wilcox.test(tops$P.tem, y=tops$P.tem)
wilcox.test(tops$P.tem, y=tops$P.umi)
ks.test(tops$P.tem, y=tops$P.umi)
ks.test(tops$P.tem, y=tops$P.tem)
ks.test(tops$P.onl, y=tops$P.tem)
